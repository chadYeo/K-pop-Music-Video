


<div class="multi_row">
	<div class="calendar_prid">
		<span class="yyyymmdd">
			<span class="year">2017.09.27</span>
		</span>
		<span class="hhmm">
			<span class="hour">08:00</span>
		</span>
		<div class="time_layer">
			<button title="시간선택" class="button_icons etc arrow_d" type="button" data-control="dropdown">
				<span class="none">시간선택</span>
			</button>
			<div class="l_popup" style="display: none;">
				<div class="box_scroll">
					<ul class="time_list">
									<li><a href="#" class="timelist" data-time-value="2017092709"><span class="time">09:00</span></a></li>
									<li><a href="#" class="timelist" data-time-value="2017092708"><span class="time">08:00</span></a></li>
									<li><a href="#" class="timelist" data-time-value="2017092707"><span class="time">07:00</span></a></li>
									<li><a href="#" class="timelist" data-time-value="2017092706"><span class="time">06:00</span></a></li>
									<li><a href="#" class="timelist" data-time-value="2017092705"><span class="time">05:00</span></a></li>
									<li><a href="#" class="timelist" data-time-value="2017092704"><span class="time">04:00</span></a></li>
									<li><a href="#" class="timelist" data-time-value="2017092703"><span class="time">03:00</span></a></li>
									<li><a href="#" class="timelist" data-time-value="2017092702"><span class="time">02:00</span></a></li>
									<li><a href="#" class="timelist" data-time-value="2017092701"><span class="time">01:00</span></a></li>
									<li><a href="#" class="timelist" data-time-value="2017092700"><span class="time">00:00</span></a></li>
					</ul>
				</div>
			</div>
			<span class="rank_update" style="display: none">순위 업데이트!</span>
		</div>
	</div>
	<div class="top3 button_group">
		<button type="button" id="d_tutorial_open" class="btn_guide"><span class="text">이용안내</span><span class="button_icons etc guide"></span></button>
		<button type="button" id="chart_Refresh"><span class="text btn_chart">새로고침</span><span class="button_icons etc refresh"></span></button>
	</div>
</div>
<div class="wrap_top3">
	<h3 class="none">실시간 TOP100 1위부터 3위까지 순위 목록</h3>
	<div class="real_graph">
		<div class="real_wrap">
			<div class="graph_bar">
				<a href="#" class="btn_five">5분보기</a>
			</div>
			<div class="graph_wrap">
				<span class="rank_txt">5분 차트보기</em></span>
				<div class="occupancy_cont">
					<div class="rank_time">
						<span class="time"> <img width="101" height="13" src="http://cdnimg.melon.co.kr/resource/image/web/chart/stit_realtime02.png" alt="실시간 점유율"/>
						</span>
						<ul>
							
								
									<li class="lank01"><a href="#"><span class="none">1위</span>
								
								
								<em>41%</em>
								</a></li>
							
								
								
									<li class="lank02"><a href="#"><span>2위</span>
								
								<em>34%</em>
								</a></li>
							
								
								
									<li class="lank03"><a href="#"><span>3위</span>
								
								<em>25%</em>
								</a></li>
							
						</ul>
					</div>
				</div>
				<div id="d_chart_box" class="graph_rank">
					<!-- 실시간 차트 랜더링 -->
				</div>
			</div>
			<div class="rank_cont d_songrankcont">
				<ol class="d_song_list">

					
						<li class="on">
							<div class="album_img">
								<img onerror="WEBPOCIMG.defaultAlbumImg(this);" width="319" height="319" src="http://cdnimg.melon.co.kr/cm/album/images/100/96/855/10096855_500.jpg/melon/resize/319/quality/80/optimize" alt="가을 아침 - 페이지 이동"/>
							</div>
							<div class="rank_music">
								<div class="music_info">
									<div class="info_top">
										<div class="chart_num">
											<span class="rank_01">1</span>
											<span class="none">위</span>
										</div>
										<div class="song_info_cont">
											<div class="thumb">
												<a href="javascript:melon.link.goAlbumDetail('10096855');"><img onerror="WEBPOCIMG.defaultAlbumImg(this);" width="80" height="80" src="http://cdnimg.melon.co.kr/cm/album/images/100/96/855/10096855_500.jpg/melon/resize/80/quality/80/optimize" alt="가을 아침 - 페이지 이동"/></a>
											</div>
											<div class="song_info_cont2">
												<div class="wrap_song_info ellipsis">
													
													<strong>
														<a title="가을 아침 - 재생" href="javascript:melon.play.playSong('19030101','30636089');">
															<span class="ellipsis">
																<span class="play">재생</span>
															
															
															
																<span class="tit">가을 아침</span>
															</span>
														</a>
													</strong>
													
													
												</div>
												<div class="wrap_atist"><a href="javascript:melon.link.goArtistDetail('261143');" title="아이유 - 페이지 이동" class="play_artist"><span>아이유</span></a></div>
												<div class="btn_like" >
													<button class="btn_icon like"
														title="가을 아침 좋아요"
														type="button" data-song-no="30636089"
														data-song-menuId="19030101" style="display:none;">
														<span class="odd_span">좋아요</span> <span class="cnt"><span
															class="none">총건수</span>0</span>
													</button>
												</div>
											</div>
										</div>
									</div>
									<div class="info_btm">
										<div class="info_btm">
											<ul>
												
												
												<li><span class="icon_info max"></span>24시간 내 최고 순위 <em>1위</em></li>
												
												
												
												
												
												<li><span class="icon_info dauily"></span>어제 누적 순위 <em>1위</em></li>
												
											</ul>
										</div>
									</div>
									
										<a href="#" class="btn_hearing" title="1위곡 누가 들었나요?">
										<img src="http://cdnimg.melon.co.kr/resource/image/web/chart_4x/btn_rank.png" alt="1위곡 누가 들었나요?"/></a>
									
								</div>
							</div>
							
								<div class="hearing_layer">
									<div class="wrap">
										<div class="cont">
											<h3>
												<span class="rank_01">1</span>
											</h3>
											<p class="txt_desc"><img src="http://cdnimg.melon.co.kr/resource/image/web/chart/txt_vote.gif" alt="누가 들었나요?최근 24시간 동안 스트리밍과 다운로드를 한 감상 이용자 정보입니다."/></p>
											<ul>
												<li class="lank01"><a href="#"><span class="none">1위</span><em>41%</em></a></li>
												<li class="lank02"><a href="#"><span class="none">2위</span><em>34%</em></a></li>
												<li class="lank03"><a href="#"><span class="none">3위</span><em>25%</em></a></li>
											</ul>
											
											
											
											
											
											
											
											
											
											<ul class="gender">
												<li style="width:44.3%;" class="man"><strong><span>남자</span></strong>
													<span class="graph_bar2"><span><em>44.3%</em></span></span>
												</li>
												<li style="width:55.7%;" class="woman"><strong><span>여자</span></strong>
													<span class="graph_bar2"><span><em>55.7%</em></span></span>
												</li>
											</ul>
											<ul class="age_group">
												<li class="nth1"><strong><span>10대</span></strong> <span
													class="graph_bar2"><span style="height:14.2%"></span></span>
												</li>
												<li class="nth2"><strong><span>20대</span></strong> <span
													class="graph_bar2"><span style="height:48.9%"></span></span>
												</li>
												<li class="nth3"><strong><span>30대</span></strong> <span
													class="graph_bar2"><span style="height:20.5%"></span></span>
												</li>
												<li class="nth4"><strong><span>40대</span></strong> <span
													class="graph_bar2"><span style="height:11.7%"></span></span>
												</li>
												<li class="nth5"><strong><span>50대</span></strong> <span
													class="graph_bar2"><span style="height:3.9%"></span></span>
												</li>
												<li class="nth6"><strong><span>기타</span></strong> <span
													class="graph_bar2"><span style="height:1.2%"></span></span>
												</li>
											</ul>
											<div class="count_num">
												<strong class="count">이용자수</strong> <em>744,532</em>
												<span class="unit">명</span>
												<span class="hour">(24시간 누적)</span>
											</div>
										</div>
										<button type="button" class="btn d_close">닫기</button>
									</div>
								</div>
							
						</li>
					
						<li >
							<div class="album_img">
								<img onerror="WEBPOCIMG.defaultAlbumImg(this);" width="319" height="319" src="http://cdnimg.melon.co.kr/cm/album/images/100/97/112/10097112_500.jpg/melon/resize/319/quality/80/optimize" alt="DNA - 페이지 이동"/>
							</div>
							<div class="rank_music">
								<div class="music_info">
									<div class="info_top">
										<div class="chart_num">
											<span class="rank_02">2</span>
											<span class="none">위</span>
										</div>
										<div class="song_info_cont">
											<div class="thumb">
												<a href="javascript:melon.link.goAlbumDetail('10097112');"><img onerror="WEBPOCIMG.defaultAlbumImg(this);" width="80" height="80" src="http://cdnimg.melon.co.kr/cm/album/images/100/97/112/10097112_500.jpg/melon/resize/80/quality/80/optimize" alt="DNA - 페이지 이동"/></a>
											</div>
											<div class="song_info_cont2">
												<div class="wrap_song_info ellipsis">
													
													<strong>
														<a title="DNA - 재생" href="javascript:melon.play.playSong('19030101','30637982');">
															<span class="ellipsis">
																<span class="play">재생</span>
															
															
															
																<span class="tit">DNA</span>
															</span>
														</a>
													</strong>
													
													
												</div>
												<div class="wrap_atist"><a href="javascript:melon.link.goArtistDetail('672375');" title="방탄소년단 - 페이지 이동" class="play_artist"><span>방탄소년단</span></a></div>
												<div class="btn_like" >
													<button class="btn_icon like"
														title="DNA 좋아요"
														type="button" data-song-no="30637982"
														data-song-menuId="19030101" style="display:none;">
														<span class="odd_span">좋아요</span> <span class="cnt"><span
															class="none">총건수</span>0</span>
													</button>
												</div>
											</div>
										</div>
									</div>
									<div class="info_btm">
										<div class="info_btm">
											<ul>
												
												
												<li><span class="icon_info max"></span>24시간 내 최고 순위 <em>1위</em></li>
												
												
												
												
												
												<li><span class="icon_info dauily"></span>어제 누적 순위 <em>6위</em></li>
												
											</ul>
										</div>
									</div>
									
										<a href="#" class="btn_hearing" title="2위곡 누가 들었나요?">
										<img src="http://cdnimg.melon.co.kr/resource/image/web/chart_4x/btn_rank.png" alt="2위곡 누가 들었나요?"/></a>
									
								</div>
							</div>
							
								<div class="hearing_layer">
									<div class="wrap">
										<div class="cont">
											<h3>
												<span class="rank_02">2</span>
											</h3>
											<p class="txt_desc"><img src="http://cdnimg.melon.co.kr/resource/image/web/chart/txt_vote.gif" alt="누가 들었나요?최근 24시간 동안 스트리밍과 다운로드를 한 감상 이용자 정보입니다."/></p>
											<ul>
												<li class="lank01"><a href="#"><span class="none">1위</span><em>41%</em></a></li>
												<li class="lank02"><a href="#"><span class="none">2위</span><em>34%</em></a></li>
												<li class="lank03"><a href="#"><span class="none">3위</span><em>25%</em></a></li>
											</ul>
											
											
											
											
											
											
											
											
											
											<ul class="gender">
												<li style="width:34.7%;" class="man"><strong><span>남자</span></strong>
													<span class="graph_bar2"><span><em>34.7%</em></span></span>
												</li>
												<li style="width:65.3%;" class="woman"><strong><span>여자</span></strong>
													<span class="graph_bar2"><span><em>65.3%</em></span></span>
												</li>
											</ul>
											<ul class="age_group">
												<li class="nth1"><strong><span>10대</span></strong> <span
													class="graph_bar2"><span style="height:20.4%"></span></span>
												</li>
												<li class="nth2"><strong><span>20대</span></strong> <span
													class="graph_bar2"><span style="height:39.6%"></span></span>
												</li>
												<li class="nth3"><strong><span>30대</span></strong> <span
													class="graph_bar2"><span style="height:20.6%"></span></span>
												</li>
												<li class="nth4"><strong><span>40대</span></strong> <span
													class="graph_bar2"><span style="height:15.0%"></span></span>
												</li>
												<li class="nth5"><strong><span>50대</span></strong> <span
													class="graph_bar2"><span style="height:3.8%"></span></span>
												</li>
												<li class="nth6"><strong><span>기타</span></strong> <span
													class="graph_bar2"><span style="height:1.9%"></span></span>
												</li>
											</ul>
											<div class="count_num">
												<strong class="count">이용자수</strong> <em>387,811</em>
												<span class="unit">명</span>
												<span class="hour">(24시간 누적)</span>
											</div>
										</div>
										<button type="button" class="btn d_close">닫기</button>
									</div>
								</div>
							
						</li>
					
						<li >
							<div class="album_img">
								<img onerror="WEBPOCIMG.defaultAlbumImg(this);" width="319" height="319" src="http://cdnimg.melon.co.kr/cm/album/images/100/73/513/10073513_500.jpg/melon/resize/319/quality/80/optimize" alt="좋니 - 페이지 이동"/>
							</div>
							<div class="rank_music">
								<div class="music_info">
									<div class="info_top">
										<div class="chart_num">
											<span class="rank_03">3</span>
											<span class="none">위</span>
										</div>
										<div class="song_info_cont">
											<div class="thumb">
												<a href="javascript:melon.link.goAlbumDetail('10073513');"><img onerror="WEBPOCIMG.defaultAlbumImg(this);" width="80" height="80" src="http://cdnimg.melon.co.kr/cm/album/images/100/73/513/10073513_500.jpg/melon/resize/80/quality/80/optimize" alt="좋니 - 페이지 이동"/></a>
											</div>
											<div class="song_info_cont2">
												<div class="wrap_song_info ellipsis">
													
													<strong>
														<a title="좋니 - 재생" href="javascript:melon.play.playSong('19030101','30486509');">
															<span class="ellipsis">
																<span class="play">재생</span>
															
															
															
																<span class="tit">좋니</span>
															</span>
														</a>
													</strong>
													
													
												</div>
												<div class="wrap_atist"><a href="javascript:melon.link.goArtistDetail('437');" title="윤종신 - 페이지 이동" class="play_artist"><span>윤종신</span></a></div>
												<div class="btn_like" >
													<button class="btn_icon like"
														title="좋니 좋아요"
														type="button" data-song-no="30486509"
														data-song-menuId="19030101" style="display:none;">
														<span class="odd_span">좋아요</span> <span class="cnt"><span
															class="none">총건수</span>0</span>
													</button>
												</div>
											</div>
										</div>
									</div>
									<div class="info_btm">
										<div class="info_btm">
											<ul>
												
												
												<li><span class="icon_info max"></span>24시간 내 최고 순위 <em>3위</em></li>
												
												
												
												
												
												<li><span class="icon_info dauily"></span>어제 누적 순위 <em>2위</em></li>
												
											</ul>
										</div>
									</div>
									
										<a href="#" class="btn_hearing" title="3위곡 누가 들었나요?">
										<img src="http://cdnimg.melon.co.kr/resource/image/web/chart_4x/btn_rank.png" alt="3위곡 누가 들었나요?"/></a>
									
								</div>
							</div>
							
								<div class="hearing_layer">
									<div class="wrap">
										<div class="cont">
											<h3>
												<span class="rank_03">3</span>
											</h3>
											<p class="txt_desc"><img src="http://cdnimg.melon.co.kr/resource/image/web/chart/txt_vote.gif" alt="누가 들었나요?최근 24시간 동안 스트리밍과 다운로드를 한 감상 이용자 정보입니다."/></p>
											<ul>
												<li class="lank01"><a href="#"><span class="none">1위</span><em>41%</em></a></li>
												<li class="lank02"><a href="#"><span class="none">2위</span><em>34%</em></a></li>
												<li class="lank03"><a href="#"><span class="none">3위</span><em>25%</em></a></li>
											</ul>
											
											
											
											
											
											
											
											
											
											<ul class="gender">
												<li style="width:50.6%;" class="man"><strong><span>남자</span></strong>
													<span class="graph_bar2"><span><em>50.6%</em></span></span>
												</li>
												<li style="width:49.4%;" class="woman"><strong><span>여자</span></strong>
													<span class="graph_bar2"><span><em>49.4%</em></span></span>
												</li>
											</ul>
											<ul class="age_group">
												<li class="nth1"><strong><span>10대</span></strong> <span
													class="graph_bar2"><span style="height:15.8%"></span></span>
												</li>
												<li class="nth2"><strong><span>20대</span></strong> <span
													class="graph_bar2"><span style="height:50.7%"></span></span>
												</li>
												<li class="nth3"><strong><span>30대</span></strong> <span
													class="graph_bar2"><span style="height:16.3%"></span></span>
												</li>
												<li class="nth4"><strong><span>40대</span></strong> <span
													class="graph_bar2"><span style="height:12.1%"></span></span>
												</li>
												<li class="nth5"><strong><span>50대</span></strong> <span
													class="graph_bar2"><span style="height:4.2%"></span></span>
												</li>
												<li class="nth6"><strong><span>기타</span></strong> <span
													class="graph_bar2"><span style="height:1.2%"></span></span>
												</li>
											</ul>
											<div class="count_num">
												<strong class="count">이용자수</strong> <em>613,637</em>
												<span class="unit">명</span>
												<span class="hour">(24시간 누적)</span>
											</div>
										</div>
										<button type="button" class="btn d_close">닫기</button>
									</div>
								</div>
							
						</li>
					
				</ol>
			</div>
		</div>
		<!-- 5분단위 확장 -->
		<div class="five_wrap" style="display: none;">
			<div class="graph_wrap">
				<div class="occupancy_cont">
					<div class="rank_time">
						<span class="time">
							<img width="361" height="16" src="http://cdnimg.melon.co.kr/resource/image/web/chart/stit_five.png" alt="5분단위 점유율이 누적되어 다음 시간의 순위가 결정됩니다."/>
						</span>
					</div>
				</div>
				<div id="d_chart_box2" class="graph_rank">
					<!-- 5분차트 랜더링 -->
				</div>
			</div>
			<div class="graph_bar mactive">
				<a href="#" class="btn_five">5분보기</a>
			</div>
			<div class="five_graph">
				<div class="d_songrankcont">
					<div id="d_ranktimer" class="time_five">
						<div class="txt_five"><span class="none">현재기준</span><em>10:00</em><span class="none"> 순위예측</span></div>
						<div class="real_time">
							<span class="time1">
								<span>1</span><span>7</span>
							</span> :
							<span class="time2">
								<span>5</span><span>5</span>
							</span> :
							<span class="time3">
								<span>3</span><span>9</span>
							</span>
						</div>
					</div>
					<ol class="d_song_list">
						
							<li id="series30636089">
								<div class="album_img">
									<img onerror="WEBPOCIMG.defaultAlbumImg(this);" width="319" height="319" src="http://cdnimg.melon.co.kr/cm/album/images/100/96/855/10096855_500.jpg/melon/resize/319/quality/80/optimize" alt="가을 아침 - 페이지 이동"/>
								</div>
								<div class="rank_music">
									<div class="music_info">
										<div class="info_top">
											<div class="chart_num">
												<span class="d_rank_tmp">{rank}</span>
												<span class="none">위 예측</span>
											</div>
											<div class="wrap_song_info ellipsis">
												<span>
												
												
												
													<strong>
													<a title="가을 아침 재생" href="javascript:melon.play.playSong('19030101','30636089');" class="btn_play_song">
														<span class="play">재생</span>
														<span class="tit">가을 아침</span>
													</a>
													</strong>
												
												</span>
											</div>
											<div class="wrap_atist"><a href="javascript:melon.link.goArtistDetail('261143');" title="아이유 - 페이지 이동" class="play_artist"><span>아이유</span></a></div>
											<div class="btn_like" >
												<button class="btn_icon like" title="가을 아침 좋아요" type="button" data-song-no="30636089" data-song-menuId="19030101" style="display:none;">
													<span class="odd_span">좋아요</span>
													<span class="cnt"><span class="none">총건수</span>0</span>
												</button>
											</div>
										</div>
									</div>
								</div>
							</li>
						
							<li id="series30613202">
								<div class="album_img">
									<img onerror="WEBPOCIMG.defaultAlbumImg(this);" width="319" height="319" src="http://cdnimg.melon.co.kr/cm/album/images/100/93/389/10093389_500.jpg/melon/resize/319/quality/80/optimize" alt="시차 (We Are) (Feat. 로꼬 & GRAY) - 페이지 이동"/>
								</div>
								<div class="rank_music">
									<div class="music_info">
										<div class="info_top">
											<div class="chart_num">
												<span class="d_rank_tmp">{rank}</span>
												<span class="none">위 예측</span>
											</div>
											<div class="wrap_song_info ellipsis">
												<span>
												
													<span class="icon_song new" title="최신곡">NEW</span>
												
												
												
													<strong>
													<a title="시차 (We Are) (Feat. 로꼬 & GRAY) 재생" href="javascript:melon.play.playSong('19030101','30613202');" class="btn_play_song">
														<span class="play">재생</span>
														<span class="tit">시차 (We Are) (Feat. 로꼬 & GRAY)</span>
													</a>
													</strong>
												
												</span>
											</div>
											<div class="wrap_atist"><a href="javascript:melon.link.goArtistDetail('1866689');" title="우원재 - 페이지 이동" class="play_artist"><span>우원재</span></a></div>
											<div class="btn_like" >
												<button class="btn_icon like" title="시차 (We Are) (Feat. 로꼬 & GRAY) 좋아요" type="button" data-song-no="30613202" data-song-menuId="19030101" style="display:none;">
													<span class="odd_span">좋아요</span>
													<span class="cnt"><span class="none">총건수</span>0</span>
												</button>
											</div>
										</div>
									</div>
								</div>
							</li>
						
							<li id="series30486509">
								<div class="album_img">
									<img onerror="WEBPOCIMG.defaultAlbumImg(this);" width="319" height="319" src="http://cdnimg.melon.co.kr/cm/album/images/100/73/513/10073513_500.jpg/melon/resize/319/quality/80/optimize" alt="좋니 - 페이지 이동"/>
								</div>
								<div class="rank_music">
									<div class="music_info">
										<div class="info_top">
											<div class="chart_num">
												<span class="d_rank_tmp">{rank}</span>
												<span class="none">위 예측</span>
											</div>
											<div class="wrap_song_info ellipsis">
												<span>
												
												
												
													<strong>
													<a title="좋니 재생" href="javascript:melon.play.playSong('19030101','30486509');" class="btn_play_song">
														<span class="play">재생</span>
														<span class="tit">좋니</span>
													</a>
													</strong>
												
												</span>
											</div>
											<div class="wrap_atist"><a href="javascript:melon.link.goArtistDetail('437');" title="윤종신 - 페이지 이동" class="play_artist"><span>윤종신</span></a></div>
											<div class="btn_like" >
												<button class="btn_icon like" title="좋니 좋아요" type="button" data-song-no="30486509" data-song-menuId="19030101" style="display:none;">
													<span class="odd_span">좋아요</span>
													<span class="cnt"><span class="none">총건수</span>0</span>
												</button>
											</div>
										</div>
									</div>
								</div>
							</li>
						
							<li id="series30637982">
								<div class="album_img">
									<img onerror="WEBPOCIMG.defaultAlbumImg(this);" width="319" height="319" src="http://cdnimg.melon.co.kr/cm/album/images/100/97/112/10097112_500.jpg/melon/resize/319/quality/80/optimize" alt="DNA - 페이지 이동"/>
								</div>
								<div class="rank_music">
									<div class="music_info">
										<div class="info_top">
											<div class="chart_num">
												<span class="d_rank_tmp">{rank}</span>
												<span class="none">위 예측</span>
											</div>
											<div class="wrap_song_info ellipsis">
												<span>
												
												
												
													<strong>
													<a title="DNA 재생" href="javascript:melon.play.playSong('19030101','30637982');" class="btn_play_song">
														<span class="play">재생</span>
														<span class="tit">DNA</span>
													</a>
													</strong>
												
												</span>
											</div>
											<div class="wrap_atist"><a href="javascript:melon.link.goArtistDetail('672375');" title="방탄소년단 - 페이지 이동" class="play_artist"><span>방탄소년단</span></a></div>
											<div class="btn_like" >
												<button class="btn_icon like" title="DNA 좋아요" type="button" data-song-no="30637982" data-song-menuId="19030101" style="display:none;">
													<span class="odd_span">좋아요</span>
													<span class="cnt"><span class="none">총건수</span>0</span>
												</button>
											</div>
										</div>
									</div>
								</div>
							</li>
						
					</ol>
				</div>
			</div>
		</div>
		<!-- //5분단위 확장 -->

		<!-- 경합중 레이어 -->
		<div id="d_chart_L" class="rank_layer" style="left: 198px; top: 60px; display: none;">
			<div class="wrap">
				<span class="num_01">
					<span class="thumb">
						<span class="thumb_frame"></span>
						<img onerror="WEBPOCIMG.defaultAlbumImg(this);" width="85" height="85" src="http://cdnimg.melon.co.kr/cm/album/images/100/96/855/10096855_500.jpg/melon/resize/85/quality/80/optimize" alt=""/>
					</span>
				</span>
				<span class="none">1 VS 2 경합중!</span>
				<span class="num_02">
					<span class="thumb">
						<span class="thumb_frame"></span>
						<img onerror="WEBPOCIMG.defaultAlbumImg(this);" width="85" height="85" src="http://cdnimg.melon.co.kr/cm/album/images/100/97/112/10097112_500.jpg/melon/resize/85/quality/80/optimize" alt=""/>
					</span>
				</span>
				<button type="button" class="btn d_close">닫기</button>
			</div>
		</div>

		<!-- 차트올킬 레이어 -->
		<div id="d_chart_L2" class="rank_layer" style="left: 271px; top: 60px; display: none;">
			<div class="wrap all_kill">
				<span class="num_123">
					<span class="thumb">
						<span class="thumb_frame"></span>
						<img width="128" height="128" src="http://cdnimg.melon.co.kr/cm/album/images/100/96/855/10096855_500.jpg/melon/resize/128/quality/80/optimize" alt=""/>
					</span>
				</span>
				<span class="none">1/2/3 차트 올~킬!!</span>
				<button type="button" class="btn d_close">닫기</button>
			</div>
		</div>
	</div>
</div>
<!-- //TOP3 -->
<div id="tutorial" class="tutorial_wrap" style="display: none">
	<div class="tutorial">
		<img usemap="#urlLink" src="http://cdnimg.melon.co.kr/resource/image/web/chart_4x/img_tutorial01_20170913.png" alt=""/>
		<map id="urlLink" name="urlLink">
			<area class="d_close" shape="rect" coords="956,24,981,49" href="#" alt="닫기" />
		</map>
	</div>
	<ul class="tab">
		<li class="on"><a href="#"><img src="http://cdnimg.melon.co.kr/resource/image/web/chart_4x/tab_tutorial01.png" alt="1.더 다양한 차트"/></a></li>
		<li><a href="#"><img src="http://cdnimg.melon.co.kr/resource/image/web/chart_4x/tab_tutorial02.png" alt="2.더 정확한 차트"/></a></li>
		<li><a href="#"><img src="http://cdnimg.melon.co.kr/resource/image/web/chart_4x/tab_tutorial03.png" alt="3.더 재미있는 차트"/></a></li>
	</ul>
	<div class="btn_next">
		<a href="#"><img src="http://cdnimg.melon.co.kr/resource/image/web/chart/btn_next.png" alt="다음"/></a>
	</div>
</div>
<script type="text/javascript" src="/resource/script/web/chart/json2.js"></script>
<script type="text/javascript">
var bigV = '';
var rankStyle = {
	color : ['#a7e52e', '#f6894e', '#59afe5', '#fd7db9', '#c998ff', '#39c5c2'],
	marker : [5, 5, 5],
	symbol : ['circle', 'square', 'diamond']
};
var chartCommSet = {
	credits: { enabled: false },
	title: { text: '' },
	legend: { enabled: false}
};

var chartExp;
var seriesRankingState = [];
var mouseMoveTimerId;
var seriesCommSet = {
		events:{
			mouseOver:function(e){
				var index = this.index;
				if($(this.chart.renderTo).is('#d_chart_box2')){
					clearTimeout(mouseMoveTimerId);
					if(seriesRankingState[index] < 4){
						chartExp.change(index);
						if(seriesRankingState[index] == series.length){
							chartExp.prevIdx = 2
						}else{
							chartExp.prevIdx = seriesRankingState[index]-1;
						}
					}
				}
			}
		}
};
var series =
	[{ type : "line", index: 0, name : "가을 아침", data: [6.147,5.566,4.690,3.955,3.852,3.937,3.762,3.744,3.873,4.023,4.203,3.894,3.826,3.956,4.056,3.933,3.571,2.952,2.455,1.956,1.704,1.834,2.982,5.128]},
	 { type : "line", index: 1, name : "DNA", data: [4.172,3.665,3.183,2.871,2.826,2.862,2.706,2.785,2.975,3.045,3.029,2.976,3.078,3.230,3.405,3.563,3.618,3.690,3.661,3.654,3.701,3.830,4.134,4.528]},
	 { type : "line", index: 2, name : "좋니", data: [3.876,3.685,3.513,3.129,2.990,3.064,3.039,3.096,3.228,3.342,3.455,3.286,3.183,3.232,3.245,3.110,2.975,2.705,2.412,2.091,1.829,1.904,2.483,3.372]}];

var rankSeries =
	[{data : [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,9,12,14,14,3,1]},
	 {data : [3,5,5,4,4,4,4,4,4,4,4,4,4,4,3,2,1,1,1,1,1,1,1,2]},
	 {data : [5,4,3,3,3,3,3,3,3,3,3,3,3,3,4,4,3,3,11,11,13,12,9,3]}];

var fiveSeries = [];
var fiveData;

	fiveSeries.push(
		{
			type : "line",
			name:  "30636089",
			data: ['', 5.75315,5.16484,5.16015,5.1967,5.25897,5.26773,5.27291,5.27818,5.27139,5.26183,5.26193,5.25653]
		}
	);
	fiveData = fiveSeries[0].data;

	fiveSeries.push(
		{
			type : "line",
			name:  "30637982",
			data: ['', 3.95778,6.27167,6.13834,5.65551,5.09423,4.69616,4.39799,4.1838,4.02367,3.87871,3.75592,3.65813]
		}
	);
	fiveData = fiveSeries[1].data;

	fiveSeries.push(
		{
			type : "line",
			name:  "30613202",
			data: ['', 3.95516,3.52386,3.55178,3.6698,3.75466,3.79134,3.79792,3.80282,3.81331,3.8128,3.81009,3.82058]
		}
	);
	fiveData = fiveSeries[2].data;

	fiveSeries.push(
		{
			type : "line",
			name:  "30486509",
			data: ['', 3.94262,3.58127,3.55473,3.51892,3.554,3.58861,3.62994,3.64403,3.66927,3.70084,3.71776,3.72916]
		}
	);
	fiveData = fiveSeries[3].data;


var errMarker = {
	errsector : [  ],
	fiveErrsector : [],
	init : function(_series, type){
		var me = this;
		me.seriesType = type;
		me._series = JSON.parse(JSON.stringify(_series));
		me.secCheck();
	},
	secCheck : function(){
		var me = this,
			_seriesData;
			tmpArr = 0,
			sectorIdx = 0,
			errchk = false,
			_Val = [];

		if(me.seriesType == "real"){
			for (var t = 0,tlen = me._series.length; t < tlen; t++){
				_seriesData = me._series[t].data;
				sectorIdx = 0;
				for (var i = 0; i < me.errsector.length; i++) {
					var start = me.errsector[i][0] -1,
						last = me.errsector[i][1] +1;

					if (start == -1) {
						start = 0;
					};

					_Val.push(_seriesData[start],_seriesData[last]);
					me.lineAnker(t, _Val, sectorIdx);
					_Val = [];
					sectorIdx++;
				};
			};
		}else {
			for (var t = 0,tlen = me._series.length; t < tlen; t++){
				 _seriesData = me._series[t].data;
				sectorIdx = 0;
				for (var i = 0,len = _seriesData.length; i < len; i++){
					if(errchk && _seriesData[i] != 0){
						_Val.push(_seriesData[i]);
						me.lineAnker(t, _Val, sectorIdx);
						_Val = [];
						errchk = false;
						tmpArr = null;
						sectorIdx++;
					}
					if(_seriesData[i] == 0){
						var otherLen = 0;
						for (var k = 0,klen = me._series.length; k < klen; k++){
							_otherSeriesData = me._series[k].data;
							if (_otherSeriesData[i] == 0) {
								otherLen++;
							};
						};
						if (otherLen == me._series.length) {
							errchk = true;
							tmpArr = i;
							if(_seriesData[i-1] != 0){
								if(t < 1){
									me.fiveErrsector[sectorIdx] = [];
								}
								_Val.push((_seriesData[i-1]) ?  _seriesData[i-1] : 0)
							}
							if(t < 1){
								me.fiveErrsector[sectorIdx].push(tmpArr);
							}
						};
					}
				}
			}
		}
	},
	lineAnker : function(seriesIdx ,_val, idx){
		var me = this;
		if(me.seriesType == "real"){
			var gap = _val[0] - _val[1],
				sum = _val[0],
				reDateArr = [],
				len = me.errsector[idx][1] - me.errsector[idx][0] + 1;

				if(me.errsector[idx][0] == 0){
					reDateArr.push(0)
					gap = 0 - _val[1];
					sum = 0;
					gap = gap / len;
					for(var i=0; i < len-1 ; i++){
						sum -= gap;
						reDateArr.push(eval(sum.toString().substr(0, 5)));
					}
				}else{
					gap = gap / (len+1);
					for(var i=0; i < len ; i++){
						sum -= gap;
						reDateArr.push(eval(sum.toString().substr(0, 5)));
					}
				}
		}else {
			var gap = _val[0] - _val[1],
				sum = _val[0],
				reDateArr = [],
				len = me.fiveErrsector[idx].length;

				if(me.fiveErrsector[idx][0] == 0){
					reDateArr.push(0.2)
					gap = 0.2 - _val[1];
					sum = 0.2;
					gap = gap / len;
					for(var i=0; i < len-1 ; i++){
						sum -= gap;
						reDateArr.push(eval(sum.toString().substr(0, 5)));
					}
				}else{
					gap = gap / (len+1);
					for(var i=0; i < len ; i++){
						sum -= gap;
						reDateArr.push(eval(sum.toString().substr(0, 5)));
					}
				}
		}
		me.writeData(seriesIdx, reDateArr, idx)
	},
	writeData : function(seriesIdx, arr, idx){
		var me = this;
		if(me.seriesType == "real"){
			var len = me.errsector[idx][1] - me.errsector[idx][0] + 1;
			for(var t=0, tlen=len; t< tlen ; t++){
				var dataIdx = me.errsector[idx][0] + t;

			  series[seriesIdx].data[dataIdx] = {y: arr[t] ,marker :{ enabled:false}};
			}
		}else {
			for(var t=0, tlen=me.fiveErrsector[idx].length; t< tlen ; t++){
			  fiveSeries[seriesIdx].data[me.fiveErrsector[idx][t]] = {y: arr[t] ,marker :{ enabled:false}};
			}
		}
	}
};

var errfiveChart = true;
var errRealChart = false;
if (errRealChart){
	errMarker.init(series, 'real');
	series.errSector = errMarker.errsector;
}

var seriesSTATE = "";

if ( 'N' == 'Y' ) {
	seriesSTATE = "경합 중";
}
if ( 'N' == 'Y' ) {
	seriesSTATE = seriesSTATE + "차트 올킬";
}
var sevCount = 0;
var sevPoint;
for ( var i=0; i < series.length; i++ ) {
	dataArr = series[i].data;
	for ( var j=0; j < dataArr.length; j++ ) {
		if ( dataArr[j] >= 7 ) {
			sevCount++;
			sevPoint = j;
		}
	}
	if ( sevCount > 0 ) {
		series[i].data[sevPoint] = {pin: true, y: series[i].data[sevPoint] , marker : { symbol : "지붕킥 " + sevCount + "회"}};

	}
	sevCount = 0;
	sevPoint = 0;
}
var dapPoint;
for ( var i=0; i < series.length; i++ ) {
	dataArr = series[i].data;
	for ( var j=0; j < dataArr.length; j++ ) {
		if ( dataArr[j] >= 6 && dataArr[j] < 7 ) {
			if ( j > 0 && series[i].data[j] > series[i].data[j-1]) {
				series[i].data[j] = typeof series[i].data[j].y === 'undefined' ? series[i].data[j] : series[i].data[j].y;

				if ( j < dataArr.length - 1 && typeof series[i].data[j+1].y === 'undefined' ) {
					if ( series[i].data[j+1] < 7.0 ) {
					} else {
						series[i].data[j] = {pin: true, y: series[i].data[j] , marker : { symbol :"지붕킥 임박"}};
					}
				}
				if ( j == dataArr.length -1 ) {
					series[i].data[j] = {pin: true, y: series[i].data[j] , marker : { symbol :"지붕킥 임박"}};
				}
			}
		}
	}
}
var dataArr = rankSeries[0].data;
var topTick = "";
var topRank = 0;
for ( var j=0; j < dataArr.length; j++ ) {
	if ( dataArr[j] == 1) {
		if (topTick == "Y") {
			topRank++;
		} else {
			series[0].data[j] = typeof series[0].data[j].y === 'undefined' ? series[0].data[j] : series[0].data[j].y;
			if ( j > 0 ) {
				series[0].data[j] = {pin: true, y: series[0].data[j] ,  marker : { symbol : "1위 등극" }}; //140610_디자인적용
			}
			topTick = "Y";
			topRank++;
		}
	} else {
		topRank = 0;
	}
}
var arrSeries1 = series[0].data;
var arrSeries2 = series[1].data;
var arrSeries3 = series[2].data;
</script>
<script type="text/javascript">

/*
$(function() {
	$('#chart_Refresh').click(function() {
		moveTime();
	});
	$('a.timelist').click(function() {
		moveTime($(this).attr("data-time-value"));
	});
	moveTime = function(t) {
		var pUrl = "?dayTime=" + t;
		if ( typeof t === 'undefined') { pUrl = ""; }
		document.location.href = "/chart/index.htm" + pUrl;
	}
});

$(function() {
	var WEBSVC = MELON.WEBSVC,
		PBPGN  = MELON.PBPGN;

	var logger = window.logger = Logger.get('Melon Core');
	logger.setLevel(Logger.DEBUG);

	(function(){
		var categories = ['09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','00','01','02','03','04','05','06','07','08'],
			numberUtil = WEBSVC.number,
			len = series[0].data.length,
			categories2 = ['55','09:00','09:05','09:10','09:15','09:20','09:25','09:30','09:35','09:40','09:45','09:50','09:55']

			var chartsData = $.extend({
				chart: {
					marginTop: 10,
					marginRight: 42,
					marginLeft: 4,
					marginBottom:35,
					borderRadius : 0,
					backgroundColor : false,
					style : {
						overflow : 'visible',
						zIndex: 1
					}
				},
				xAxis: {
					max: 23,
					min: 0,
					categories: categories,
					labels: {
						useHTML : true,
						style : {
							color:"#a1adc6",
							fontSize:"11px"
						},
						format:'<span class="d_xlabel">{value}</span>'
						, y:18
					},
					lineWidth:0,
					tickWidth: 0,
					endOnTick: false,
					tickmarkPlacement: false,
					gridLineWidth: 0,
					gridLineColor: '#6f788b',
					gridLineDashStyle: 'solid'
				},
				yAxis: {
					title: {
						text: ''
					},
					min: 0.2,
					max: 7.04,
					labels: {
						enabled : false
					},
					visible: false,
					startOnTick: false,
					endOnTick: false,
					gridLine : false,
					gridLineWidth: 0
				},
				tooltip: {
					useHTML :true,
					headerFormat : '',
					style : {
						visibility: 'visible',
						color:"#000",
						fontSize:"11px"
					},
					formatter : function(){
						var cr = rankSeries[this.series.index].data[$.inArray(this.x, categories)];
						if (cr >= 100) {
							return false;
						} else {
							return '<span>시간: <b>'+this.x+ ":00</b> <br/> 순위 : <b>"+rankSeries[this.series.index].data[$.inArray(this.x, categories)]+'위</b></span>'
						}

					}
				},
				plotOptions: {
					series: {
						allowPointSelect: false,
						point: {
							events: {
								mouseOver: function() {
									if(this.series.userOptions.index != $('.rank_time ul li.on').index()){
										$('.highcharts-tooltip').hide();
									}else{
										$('.highcharts-tooltip').show();
									}
								}
							}
						},
						marker : {
							enabled : false,
							states : {
								hover : {
									enabled : false
								}
							}
						},
						states : {
							hover : {
								enabled : false
							}
						}
					}
				},
				series: series
			}, chartCommSet);

			var chartConfig = function(){
				var _labelVal = null, _labelTxt = null;

				for(var i=0; i<series.length; i++){
					$.extend(series[i], seriesCommSet);
				}
				for(var i=0; i<series.length; i++){
					series[i].color = rankStyle.color[i];
					for(var t=0; t < series[i].data.length ; t++){
						if(series[i].data[t].pin){
							_labelTxt = series[i].data[t].marker.symbol;
							if(_labelTxt.indexOf('지붕킥') != -1){
								if(_labelTxt.split('지붕킥 ')[1] == "임박"){
									_labelVal = "issue2_s"+(i+1);
								}else{
									_labelVal = "kick"+parseInt(_labelTxt.split('지붕킥 ')[1]);
								}
							}else{
								switch(_labelTxt){
									case "12시간 이상 1위":
										_labelVal = "issue1_s"+(i+1);
										break;
									case "1위 등극":
										_labelVal = "issue3_s"+(i+1);
										break;
								}
							}
							series[i].data[t].marker.symbol = 'url(http://image.melon.co.kr/resource/image/web/chart/icon_'+_labelVal+'.png)';
						}
					}
					series[i].marker = {
						radius : 3,
						symbol : rankStyle.symbol[0],
						lineColor: rankStyle.color[i],
						fillColor: '#4a5771',
						lineWidth: 2
					}
				}
			}
			chartConfig();
			$('#d_chart_box').highcharts(chartsData);

		function chartStart() {

			var chartStateLayer = {
				STATE : seriesSTATE,
				_setClose : false,
				init : function(state){
					var me = this,
					cookieId,
					now = new Date(),
					_isOpen1 = WEBSVC.Cookie.get('d_chart_L'),
					_isOpen2 = WEBSVC.Cookie.get('d_chart_L2');
					me.$items = $('#d_chart_L').add($('#d_chart_L2'));
					me.$items.each(function(){
						var item = $(this);
						item.find('.d_close').click(function(){
							cookieId = $(this).parents('.rank_layer').attr('id');
							var expiresDay = new Date();
							expiresDay.setMinutes(59);
							expiresDay.setSeconds(59);
							WEBSVC.Cookie.set(cookieId, now.getHours(), {expires : expiresDay});
							item.hide();
						})
					});
					if (me.STATE.length == 0) {
						return;
					}else if (me.STATE.length > 5 && _isOpen1 != now.getHours() && _isOpen2 != now.getHours()) {
						me.$items.show();
					}else if (me.STATE == "경합 중" && _isOpen1 != now.getHours()) {
						if (_isOpen1 != now.getHours()) {
							me.$items.eq(0).show();
						};
					}else if (me.STATE == "차트 올킬" && _isOpen2 != now.getHours()) {
						if (_isOpen2 != now.getHours()) {
							me.$items.eq(1).show();
						};
					};
				},
				hide : function() {
					$('#d_chart_L').hide();
					$('#d_chart_L2').hide();
				}
			};
			chartStateLayer.init();

			(function(){
				function pushRankArray(series){
					var rankState = {
						upRankArr : [],
						vIndexArr : [3,4,5],
						nowRankArr : []
					}
					var rankval = [];
					var prevRankval = [];
					var arrRank = {x : 0, y : [], _y : []}, _tmpPoint,
						_series = JSON.parse(JSON.stringify(series));

					function rankChange() {
						for (var i = 0,len = _series.length; i < len; i++){
							var t =0, tmpval, prevTmpval;
							_tmpPoint = _series[i].data;
							_tmpPoint.reverse();
							tmpval = (typeof _tmpPoint[0] != 'number') ? _tmpPoint[0].y : _tmpPoint[0];
							prevTmpval = (typeof _tmpPoint[1] != 'number') ? _tmpPoint[1].y : _tmpPoint[1];
							while(tmpval == 0){
								t++;
								tmpval = (typeof _tmpPoint[t] != 'number') ? _tmpPoint[t].y : _tmpPoint[t];
							}
							if(i>2){
								rankState.upRankArr.push(i);
							}
							rankval.push(tmpval);
							prevRankval.push(prevTmpval);
						}
					}
					function rankingChk() {
						var rankingClone = [], ranking_end = [],rankIdx,rank,rankOver,j=0;
						for(var i=0,len = _series.length; i<len; i++){
							rankingClone[i] = rankval[i];
						};
						while(rankingClone.length > 0) {
							var overlapIdx = [],rankOverlap = [],rankOverlapSlice = [];
							if (rankingClone.length == 1) {
								rank = rankingClone[0];
							}else {
								rank = Math.max.apply(null,rankingClone);
							};
							$(rankval).each(function(index) {
								if (this == rank) {
									rankIdx = index;
									overlapIdx.push(index);
									rankOverlap.push(prevRankval[rankIdx]);
									rankOverlapSlice.push(prevRankval[rankIdx]);
								};
							});
							if (rankOverlap.length > 1) {
								while(rankOverlapSlice.length > 0) {
									if (rankOverlapSlice.length == 1) {
										rankOver = rankOverlapSlice[0];
									}else {
										rankOver = Math.min.apply(null,rankOverlapSlice);
									};

									rankIdx = overlapIdx[$.inArray(rankOver, rankOverlap)];
									ranking_end[rankIdx] = (j+1);
									j++;
									rankOverlapSlice = $.grep(rankOverlapSlice, function(a) {
										return a > rankOver;
									});
								};
							}else {
								ranking_end[rankIdx] = (j+1);
								j++;
							};
							rankingClone = $.grep(rankingClone, function(a) {
								return a < rank;
							});
						};
						for(var i=0,len = _series.length; i<len; i++){
							if(ranking_end[i] > 3){
								rankState.nowRankArr.push(i);
							}
						}
						seriesRankingState = ranking_end;
					}
					rankChange();
					rankingChk();

					return rankState;
				}

				var realTimeChart = $('#d_chart_box'),
					charts = realTimeChart.highcharts(),
					charts2,
					chartIdx = 0,
					chartsData2,
					chartTimer = null,
					moreAreaBox = $('div.real_graph div.graph_bar');

				function createRankArray(series){
					var arrRankPosition = {x : 0, y : [], _y : []}, _tmpPoint, _series = series;

					for(var i=0; i<_series.length; i++){
						_tmpPoint = _series[i].graphPath;
						arrRankPosition._y.push(parseInt((_tmpPoint[5]+"").split('.')[0]));
						if(typeof _tmpPoint[0] =="string"){ _tmpPoint.reverse() };
						arrRankPosition.y.push(parseInt((_tmpPoint[0]+"").split('.')[0]));
					}
					arrRankPosition.x = parseInt((_tmpPoint[1]+"").split('.')[0]);

					return arrRankPosition;
				}
				var _rankState = pushRankArray(fiveSeries);
				function chartRankInit(sTarget){
					$(sTarget +' .d_icon_rank').remove();

					var _x = 0;
					var jSeries = realTimeChart.highcharts().series;

					if(sTarget == "#d_chart_box2"){
						jSeries = charts2.series;
						_x = -40;
					}
					var gradePos = createRankArray(jSeries);

					for(var i=0, len = jSeries.length; i<len; i++){

						if(i<3){
							if(sTarget == "#d_chart_box2"){
								if(seriesRankingState[i] < 4){
									$('#series'+fiveSeries[$.inArray(seriesRankingState[i], seriesRankingState)].name).addClass('forecast'+(i+1)).find('.d_rank_tmp').removeClass().addClass('rank_0'+seriesRankingState[i]).text(seriesRankingState[i]);//140527_순위처리
								}
								$('<a href="#" class="d_icon_rank d_rank'+(i+1)+' forecast'+seriesRankingState[i]+'">'+seriesRankingState[i]+'위 예측"</a>').appendTo(sTarget).css({
									position : 'absolute',
									left : gradePos.x + 16 + _x,
									top : gradePos.y[i] - 3,
									zIndex : 0
								});
							}else{
								$('<a href="#" class="d_icon_rank d_rank'+(i+1)+'">'+(i+1)+'위"</a>').appendTo(sTarget).css({
									position : 'absolute',
									left : gradePos.x + 16 + _x,
									top : gradePos.y[i] + 1,
									zIndex : 0
								});
							}
						} else {

							if(seriesRankingState[i] < 4){
								$('#series'+fiveSeries[$.inArray(seriesRankingState[i], seriesRankingState)].name).addClass('forecast'+(seriesRankingState[i]+3)).find('.d_rank_tmp').removeClass().addClass('rank_0'+seriesRankingState[i]).text(seriesRankingState[i]);//140515_순위처리
							}
							$('<a href="#" class="d_icon_rank d_new'+seriesRankingState[i]+'">'+seriesRankingState[i]+'위 예측</a>').appendTo(sTarget).css({
								position : 'absolute',
								left : gradePos.x + 16 + _x,
								top : gradePos.y[i] - 9,
								zIndex : 0
							})
							if((_rankState.nowRankArr[(i-3)]+1) == 1){
								$(sTarget).find('.d_icon_rank.d_new1').addClass('mhover');
							}
						}
					}
					var activeFn = function(e){
						e.preventDefault();
						var idx = $(this).index();
						chartExp.change(idx-1);
						chartExp.prevIdx = idx-1;
					}
					$(sTarget + ' .d_icon_rank').bind('mouseenter',activeFn)
				}

				chartExp = {
					prevIdx : 0,
					activeTimeIdx : 0,
					init : function(chartType){
						chartExp.stop();
						var _chartSelector = (!chartType) ? "#d_chart_box" : "#d_chart_box2",
							_chartSelector2 = (!chartType) ? ".real_wrap" : ".five_graph",
							$me = $(_chartSelector),
							$me2 = $(_chartSelector2);

						chartExp.chartType = chartType;
						chartExp.chartIdx = 0;
						chartExp.$rankItemsArr = [0, 1, 2];
						chartExp.$chartSelector = _chartSelector;
						chartExp.$rankItems = $me2.find('div.d_songrankcont>ol>li');

						if(chartType){
							chartExp.$rankItemsArr = [
							$('#series'+fiveSeries[$.inArray(1, seriesRankingState)].name).index(),
							$('#series'+fiveSeries[$.inArray(2, seriesRankingState)].name).index(),
							$('#series'+fiveSeries[$.inArray(3, seriesRankingState)].name).index()]
							chartExp.$rankItems.removeClass('on');
							$('#series'+fiveSeries[$.inArray(1, seriesRankingState)].name).addClass('on');
						}else{
							chartExp.$rankItems.removeClass('on').eq(chartExp.$rankItemsArr[0]).addClass('on');
						}
						chartExp.$rankItems.removeClass('on').eq(chartExp.$rankItemsArr[0]).addClass('on');
						var _markerGroup = chartExp.$markerGroup = $me.find('.highcharts-series-group .highcharts-markers');
						$me.parent().hover(chartExp.stop,chartExp.play);
						var _rankCont = $me2.find('.d_songrankcont');
						_rankCont.unbind();
						_rankCont.hover(chartExp.stop,chartExp.play);
						chartRankInit(_chartSelector);
						chartExp.rankIcon = $me.find('.d_icon_rank');

						if(!chartType){
							for (var i =0, len = series.length; i<len ; i++){
								realTimeChart.highcharts().series[i].update({
									lineWidth : 2,
									marker : {
										enabled: false
									}
								});
							}
						}else{
							for (var i =0, len = fiveSeries.length; i<len ; i++){
								charts2.series[i].update({
									lineWidth : 1,
									marker : {
										enabled: false
									}
								});
							}
						}
						var _series = chartExp.$series = $me.find('.highcharts-series');
						if(!chartType){
							realTimeChart.highcharts().series[0].update({
								lineWidth : 3,
								marker: {
									enabled: true
								}
							});
							_series.children().not('.highcharts-tracker').css('opacity',0.3);
							_markerGroup.children().css('opacity',0.3);
							chartExp.rankIcon.eq(0).addClass('mhover');
							$('.rank_time ul li').eq(0).addClass('on').siblings().removeClass('on');

						}else{
							var _tVal = $.inArray(1, seriesRankingState);
							_series.children().not('.highcharts-tracker').css('opacity',0.3);
							_markerGroup.children().css('opacity',0.3);
							charts2.series[_tVal].update({
								lineWidth : 3,
								marker : {
									enabled: true,
									radius : 3.5,
									fillColor: '#4a5771',
									lineWidth: 2,
									lineColor: null
								}
							})
							chartExp.rankIcon.eq(_tVal).addClass('mhover');
						}
						chartExp.preIdx = null;
						WEBSVC.$doc.on('modalshown','.d_like_alert',function(){
							_rankCont.unbind();
							chartExp.stop();
						}).on('modalhide','.d_like_alert',function(){
							_rankCont.hover(chartExp.stop,chartExp.play);
						})
						chartExp.play();

						var _chart,activeTime,_chartsData;
							if(!chartType){
								_chart = realTimeChart.highcharts();
								_chartsData = chartsData;
								activeTime = '08';
							}else{
								_chart = charts2;
								_chartsData = chartsData2;
								activeTime = categories2[fiveSeries[0].data.length - 1];
							}
							chartExp.activeTimeIdx = $.inArray(activeTime, _chartsData.xAxis.categories);

							_chart.xAxis[0].addPlotLine({
								value: chartExp.activeTimeIdx,
								color: '#a1adc6',
								width: 1,
								id: 'plot-line-1',
								zIndex:1
							});
							if($.inArray("00", _chartsData.xAxis.categories) != -1){
								_chart.xAxis[0].addPlotLine({
									value: $.inArray("00", _chartsData.xAxis.categories),
									color: '#6c768a',
									width: 1,
									id: 'plot-line-2',
									zIndex:1
								});
							}
							$(_chartSelector + ' .d_xlabel').eq(chartExp.activeTimeIdx).addClass('on');

					},
					change : function(no){
						var $rankItems = this.$rankItems;
						var _series = this.$series;
						var _rankIcon = this.rankIcon;
						var _chartSelector = this.$chartSelector;

						if(!chartExp.chartType){
							for (var i =0, len = series.length; i<len ; i++){
								realTimeChart.highcharts().series[i].update({
									lineWidth : 2,
									marker : {
										enabled: false
									}
								});
							}
							$('#d_chart_box').find('.highcharts-series').children().not('.highcharts-tracker').css('opacity',0.3);
						}else{
							for (var i =0, len = fiveSeries.length; i<len ; i++){
								charts2.series[i].update({
									lineWidth : 1,
									marker : {
										enabled: false
									}
								});
							}
							$('#d_chart_box2').find('.highcharts-series').children().not('.highcharts-tracker').css('opacity',0.3);
						}
						if(chartExp.chartIdx > 2){
							chartExp.chartIdx = 0;
						}
						if(no == null){
						   chartExp.chartIdx = chartExp.chartIdx+1;
						}else{
							if(chartExp.chartType){
								chartExp.chartIdx = seriesRankingState[no]-1
							}else{
								chartExp.chartIdx = no
							}
						}

						if(chartExp.chartIdx > 2){
							chartExp.chartIdx = 0;
						}

						var _tVal = $.inArray(chartExp.chartIdx+1, seriesRankingState);
						if(!chartExp.chartType){
							$('.rank_time ul li').eq(chartExp.chartIdx).addClass('on').siblings().removeClass('on');
							realTimeChart.highcharts().series[chartExp.chartIdx].update({
								lineWidth : 3,
								marker: {
									enabled: true
								}
							});
							$(_chartSelector + ' .d_xlabel').eq(chartExp.activeTimeIdx).addClass('on');
							_rankIcon.removeClass('mhover').eq(chartExp.chartIdx).addClass('mhover');
							$rankItems.removeClass('on').eq(chartExp.chartIdx).addClass('on');
						}else{
							charts2.series[_tVal].update({
								lineWidth : 3,
								marker : {
									enabled: true,
									radius : 3.5,
									fillColor: '#4a5771',
									lineWidth: 2,
									lineColor: null
								}
							})
							$(_chartSelector + ' .d_xlabel').eq(chartExp.activeTimeIdx).addClass('on');
							_rankIcon.removeClass('mhover').eq(_tVal).addClass('mhover');
							$rankItems.removeClass('on').eq(chartExp.$rankItemsArr[chartExp.chartIdx]).addClass('on');
						}
					},
					play: function(){
						chartExp.chartIdx = chartExp.prevIdx;
						clearInterval(chartTimer);
						chartTimer = setInterval(function() {
							chartExp.change();
						}, 3000);
					},
					stop: function(){
						clearInterval(chartTimer);
					}
				}

				setTimeout(function(){
					chartExp.init(0);
				},100);

				$('#d_chart_box').on('mouseenter mouseleave', 'span.time_layer', function(e){
					e.preventDefault();
					clearTimeout(mouseMoveTimerId);
					var _id = $(this).parent().attr('id');
					var seriesNo = _id.split('_')[2];
					var _idx = _id.split('_')[3];

					switch (e.type){
						case "mouseenter":
							$(this).addClass('mactive');
						break;
						case "mouseleave":
							$(this).removeClass('mactive');
						break;
					}
				});

				$('.real_graph').on('click','.music_info > a.btn_hearing', function(e){
					e.preventDefault();
					chartExp.stop();
					$('.music_info > .info_top').hide();
					$('.hearing_layer').show().end().find('.d_close').click(function(e){
						e.preventDefault();
						$('.hearing_layer').hide();
						$('.music_info > .info_top').show();
						chartExp.play();
					});
				});

				var $fiveMinChart = $('#d_chart_box2');

				moreAreaBox.hover(function(){moreAreaBox.addClass('mhover')}, function(){moreAreaBox.removeClass('mhover')});
				moreAreaBox.click(function(){
					var item = moreAreaBox;
					var isOn = item.is('.mactive');
					var $jumpChart = $('#d_chart_box');
					var isStepHide = 0;

					$jumpChart.parents('.real_wrap')[(!isOn) ? 'show' : 'hide']();
					$fiveMinChart.parents('.five_wrap')[(!isOn) ? 'hide' : 'show']();
					item[(isOn) ? 'removeClass' : 'addClass']('mactive');

					chartExp.stop();

					if(isOn){
						fiveChartVeiw();
					}else{
						chartExp.init(0);
					}
					chartExp.prevIdx = 0;
					chartExp.chartIdx = 0;
					return false;
			   })
				function fiveChartVeiw(){
					$('.hearing_layer').find('.d_close').trigger('click');

					var _val = 0,_indexVnum;

					if (errfiveChart){
						errMarker.init(fiveSeries);
						fiveSeries.errSector = errMarker.errsector;
					}
					for(var i=0; i<fiveSeries.length; i++){
						$.extend(fiveSeries[i], seriesCommSet, {
							lineWidth :  1,
							states : { hover : { lineWidth :  3}}
						});
					}

					for(var i=0; i<fiveSeries.length; i++){
						if(series[i]){
							var curSeriesVal = 0;
							var nxtSeriesVal = 0;
							if ( typeof series[i].data[series[i].data.length-2].y  === 'undefined' ) {
								curSeriesVal = series[i].data[series[i].data.length-2];
							} else {
								curSeriesVal = series[i].data[series[i].data.length-2].y;
							}

							if ( typeof series[i].data[series[i].data.length-1].y  === 'undefined' ) {
								nxtSeriesVal = series[i].data[series[i].data.length-1];
							} else {
								nxtSeriesVal = series[i].data[series[i].data.length-1].y;
							}

							fiveSeries[i].data[0] = curSeriesVal;
							fiveSeries[i].data[1] = nxtSeriesVal;
						}else{
							fiveSeries[i].data[0] = -2;
							fiveSeries[i].data[1] = -2;
						}
					}

					if (errfiveChart){
						errMarker.init(fiveSeries);
						fiveSeries.errSector = errMarker.errsector;
					}

					for(var i=0; i<fiveSeries.length; i++){
						if(i==0){
							fiveSeries[i].marker = {enabled : true}
						}else{
							fiveSeries[i].marker = {}
						}
						fiveSeries[i].marker.symbol = rankStyle.symbol[0];

						if(i>2){ // new일 경우
							_indexVnum = _rankState.vIndexArr[_rankState.nowRankArr[_val]];
							fiveSeries[i].color = rankStyle.color[seriesRankingState[i]+2];
							fiveSeries[i].marker.lineColor = rankStyle.color[seriesRankingState[i]+2];
							fiveSeries[i].marker.fillColor = rankStyle.color[seriesRankingState[i]+2];
							_val++;
						}else{ // 1,2,3위 스타일적용
							fiveSeries[i].color = rankStyle.color[i];
							fiveSeries[i].marker.lineColor = rankStyle.color[i];
							fiveSeries[i].marker.fillColor = rankStyle.color[i];
						}
					}

					for (var i = 0; i < fiveSeries.length; i++) {
						for (var k = 0; k < fiveSeries[i].data.length; k++) {
							if (fiveSeries[i].data[k] > 7) {
								fiveSeries[i].data[k] = 7;
							}
						}
					}

					chartsData2 = $.extend({
						chart: {
							marginTop: 6,
							marginRight: 26,
							marginLeft: -30,
							marginBottom:28,
							borderRadius : 0,
							backgroundColor : false
						},
						xAxis: {
							max: 12,
							min: 0,
							categories: categories2,
							labels: {
								useHTML : true,
								style : {
									color:"#a7b8d4",
									fontSize:"10px"
								},
								format:'<span class="d_xlabel">{value}</span>'
								, y:18
							},
							lineWidth: 0,
							tickWidth: 0,
							showFirstLabel: false,
							endOnTick: false,
							tickmarkPlacement: false,
							gridLineWidth: 0
						},
						yAxis: {
							title: {
								text: ''
							},
							min: 0.2,
							max: 7.05,
							labels: {
								enabled : false
							},
							visible: false,
							startOnTick: false,
							endOnTick: false,
							gridLine : false,
							gridLineWidth: 0
						},
						tooltip: {
							enabled: false
						},
						plotOptions: {
							series: {
								allowPointSelect: false,
								marker : {
									enabled : false,
									radius : 2.2,
									states : {
										hover : {
											enabled : false
										}
									}
								},
								states : {
									hover : {
										enabled : false
									}
								}
							}
					   },
					   series: fiveSeries
					}, chartCommSet);

					$fiveMinChart.highcharts(chartsData2);
					charts2 = $fiveMinChart.highcharts();
					chartExp.init(1);
				}

	
	
				var _isChartReLoad = false;
	
	
				var chartReLoadFn = function(){
					var $rank_cont = $('div.real_graph div.d_songrankcont');
					$('div.real_graph span.rank_txt').hide();
					chartStateLayer.hide();
					moreAreaBox.unbind().addClass('disabled');
					$rank_cont.find('ol').addClass('time_click');
				}
				if(!_isChartReLoad){
					chartReLoadFn();
				} else {
					$('div.real_graph span.rank_txt').show();
				}
				$('.rank_time').find('ul a').click(function(e){
					e.preventDefault();
					var item = $(this).parent();
					clearInterval(chartTimer);
					chartExp.prevIdx = item.index();
					chartExp.change(item.index());
				})
			})();

		}

		// Create ChartGraph
		chartStart();

		var RankUpdatePushTimer = function(){
			var timerelement = $("#d_ranktimer .real_time");
			timerelement.bind({
				'_pushAlram' : function(){
					$('.rank_update').show();
				}
			})
			var isAClock = false;
			var update = window.setInterval( function(){
				var newdate = new Date(),
				hour = newdate.getHours(),
				minute = newdate.getMinutes(),
				second = newdate.getSeconds(),d_time;
				var isUpdate;
				if(hour<10){ hour = "0"+hour }
				if(minute<10){ minute = "0"+minute }
				if(second<10){ second = "0"+second }
				if(isAClock){
					if(minute == "00" && second == "30" && isUpdate != true){
						try{
							$.get("/chart/real/getUpdateTime.json", {nextHour : hour}, function(data) {
								if ( data.flagUpdate == 'Y') {
									var addTime = '<li><a href=\"javascript:;\" class=\"timelist\" data-time-value=\"20170927' + hour + '\"><span class="time">' + hour + ':00</span></a></li>';
									$('.time_list').prepend(addTime);
									timerelement.trigger('_pushAlram');
									isUpdate = true;
									$('a.timelist').click(function() {
										moveTime($(this).attr("data-time-value"));
									});
								}
							});
						} catch(e) {
						}
					}
					isAClock = false;
				}
				d_time = hour+""+minute+""+second;
				timerelement.find('> span >span').each(function(idx){
					var item = $(this);
					var n= d_time.substr(idx, 1);
					if(item.text() == n) { return }
					item.text(d_time.substr(idx, 1));
				})
				isAClock = true;
			},1000);
		}
		RankUpdatePushTimer();

		var tutorialLayer = function(){
			var me        = $('#tutorial'),
				tabBtns   = me.find('ul.tab > li > a'),
				targetImg = me.find('> div >img'),
				closeBtn  = me.find('.d_close'),
				imgSrcArr = ['img_tutorial01_20170913.png','img_tutorial02_20170913.png','img_tutorial03_20170913.png'],
				cookieId  = 'charttutorial',
				_isOpen   = WEBSVC.Cookie.get(cookieId),
				openBtn   = $('#d_tutorial_open'),
				nextBtn   = me.find('.btn_next'),
				pageState = 0;

			tabBtns.add(closeBtn).bind({
				'focusin mouseenter': function(){
					$(this).addClass('hover');
				},
				'focusout mouseleave': function(){
					$(this).removeClass('hover');
				}
			});
			tabBtns.click(function(e){
				e.preventDefault();
				var item = $(this);
				var _idx = item.parent().index();
				me.show();
				if(_idx != 2){
					nextBtn.show();
				}else{
					nextBtn.hide();
				}
				item.parent().addClass('on').siblings().removeClass();
				targetImg[0].src = targetImg[0].src.replace(targetImg[0].src.split('/').reverse()[0], imgSrcArr[_idx]);
				pageState = _idx;
			});
			closeBtn.click(function(e){
				e.preventDefault();
				me.hide();
				$('.summ_prid.real_chart').focus();
				var expiresDay = new Date();
				expiresDay.setDate(expiresDay.getDate() + 365);
				WEBSVC.Cookie.set(cookieId, true, {expires : expiresDay});
			});
			nextBtn.click(function(e){
				e.preventDefault();
				pageState++;
				if(pageState < 3){
					tabBtns.eq(pageState).trigger('click');
				}else{
					return false;
				}
			})
			if(!_isOpen){
				me.show();
				tabBtns.eq(0).trigger('click');
			}
			openBtn.click(function(e){
				e.preventDefault();
				me.show();
				tabBtns.eq(0).trigger('click');
			})
		}
		tutorialLayer();
	})();
});

var LIKE_SET = {
	likeTop  : "<span class=\"odd_span\">{TXT}</span>",
	likeCnt  : "<span class=\"odd_span\">{TXT}</span>\n<span class=\"cnt\">\n<span class=\"none\">총건수</span>\n{CNT}</span>",
	likeObj  : $('div.rank_music button.like'),
	likeAttr : 'data-song-no',
	likeUrl  : '/commonlike/getSongLike.json'
};

var contsIdList = LIKE_SET['likeObj'].map(function() { return $(this).attr(LIKE_SET['likeAttr']); }).get().join(',');
var tmpl, title;
$.get(LIKE_SET['likeUrl'], { contsIds : contsIdList }, function(data) {
	var robj;
	$.each(data.contsLike, function(i, v) {
		robj  = LIKE_SET['likeObj'].eq(i);
		title = robj.attr('title').split(' 좋아요');
		robj[v.LIKEYN == 'Y' ? 'addClass' : 'removeClass']('on').attr('title', title[0] + (v.LIKEYN == 'Y' ? ' 좋아요 취소' : ' 좋아요'));
		if ( robj.is('button.btn_icon_emphs') ) {
			tmpl  = LIKE_SET[ 'likeTop' ];
			robj.html(
				tmpl.replace(/\{TXT\}/g, (v.LIKEYN == 'Y' ? '좋아요 취소' : '좋아요'))
			);
			robj.next().html(v.SUMMCNT.toString().replace(/(\d)(?=(?:\d{3})+$)/g, "$1,"));
		} else {
			tmpl  = LIKE_SET[ 'likeCnt' ];
			if ( v.SUMMCNT.toString() == '-' ) {

				robj.css({'display':'none'});
			} else {

				robj.html(
					tmpl.replace(/\{TXT\}/g, (v.LIKEYN == 'Y' ? '좋아요 취소' : '좋아요')).replace(/\{CNT\}/g, v.SUMMCNT.toString().replace(/(\d)(?=(?:\d{3})+$)/g, "$1,"))
				).prop('disabled', true).prop('disabled', false);
				robj.css({'display':''});
			}
		}
	});
});
*/

</script>
